# Identity Event Handler extension.

Steps 

1. Build the source using `./gradlew clean build` command.
2. Copy /com-organization-1.0-SNAPSHOT.jar file into <IS_HOME>/repository/components/dropins/ folder.
3. Add following configurations to <IS_HOME>/repository/conf/deployement.toml file
4. Restart the server. 
```

[[event_handler]]
name= "customUserRegistration"
subscriptions =["PRE_ADD_USER"]

```
Steps to Modify.

1. Gradle plugins for OSGI are not common
2. The used OSGI plugin uses a different version of SCR processors. Hence the component.xml files that are generated by default are not useful.
3. Hence I have added the overridden xml in src/resources/OSGI-INF directory.
4. If you modify class names or consume more services you have to update this file. You can either edit the file or generate a file and modify. Below are steps to generate and modify
 
Steps to update the above file. 

1) Go to `build.gradle.kts`
2) Remove `"-dsannotations" to "",`
3) Build the source using `./gradlew clean build` command.
4) Extract the jar which is in /build/lib directory. 
5) Find the xml file inside OSGI-INF directory
6) copy it to src/OSGI-INF directory
7) Modify the `http://www.osgi.org/xmlns/scr/v1.3.0` to `http://www.osgi.org/xmlns/scr/v1.1.0`
8) Revert the removal did in step 2. 
9) Build the source using `./gradlew clean build` command.
10) Copy the jar to server